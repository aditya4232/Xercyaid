<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LearnHub App - Firebase</title>
    <link rel="stylesheet" href="css/style.css"> <!-- Will be generated by Tailwind CSS -->
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Navigation Bar -->
    <nav class="bg-blue-600 text-white p-4 shadow-md">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold">LearnHub App</h1>
            <div>
                <span id="currentUserEmail" class="mr-4"></span>
                <button id="logoutButton" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                    Logout
                </button>
            </div>
        </div>
    </nav>

    <div class="container mx-auto p-4 mt-6">

        <!-- Story Creation Area -->
        <section id="storyCreationArea" class="mb-8 p-6 bg-white rounded-lg shadow-md">
            <h2 class="text-xl font-semibold mb-4 text-purple-700">Create a Story</h2>
            <div class="flex items-center space-x-3">
                <input type="text" id="storyTextContent" placeholder="Share a quick story (text only)..."
                       class="flex-grow px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm">
                <button id="submitStoryButton"
                        class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500">
                    Add Story
                </button>
            </div>
            <div id="storyErrorMessage" class="text-red-500 text-sm mt-2 hidden"></div>
        </section>
        
        <!-- Story Display Area -->
        <section id="storiesArea" class="mb-8">
            <h2 class="text-xl font-semibold mb-3 text-purple-700">Active Stories</h2>
            <div id="storyFeedContainer" class="flex space-x-4 p-4 bg-white rounded-lg shadow overflow-x-auto min-h-[100px]">
                <!-- Story circles will be populated here by app_main_stories.js -->
                <p class="text-gray-400">Loading stories...</p>
            </div>
        </section>

        <!-- Story Modal -->
        <div id="storyModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center hidden px-4">
            <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-md mx-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="storyModalDisplayName" class="text-xl font-semibold text-purple-700">Story By...</h3>
                    <button id="storyModalCloseButton" class="text-gray-700 hover:text-gray-900 text-2xl font-bold">&times;</button>
                </div>
                <div id="storyModalContent" class="text-gray-800 text-lg whitespace-pre-wrap break-words">
                    Story content goes here...
                </div>
            </div>
        </div>


        <!-- Post Creation Area -->
        <section id="postCreationArea" class="mb-8 p-6 bg-white rounded-lg shadow-md">
            <h2 class="text-xl font-semibold mb-4 text-blue-700">Create a New Post</h2>
            <!-- Form does not need an ID if we target the button directly -->
            <div class="space-y-4">
                <div>
                    <label for="postTextContent" class="block text-sm font-medium text-gray-700">What's on your mind?</label>
                    <textarea id="postTextContent" name="postTextContent" rows="3" required
                              class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                              placeholder="Share something interesting..."></textarea>
                </div>
                <!-- Image upload is out of scope for this subtask -->
                <!-- 
                <div>
                    <label for="postImage" class="block text-sm font-medium text-gray-700">Upload Image (Optional)</label>
                    <input type="file" id="postImage" name="postImage" accept="image/*"
                           class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                </div>
                -->
                <div id="postErrorMessage" class="text-red-500 text-sm hidden"></div>
                <div>
                    <button id="submitPostButton" type="button" 
                            class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        Post
                    </button>
                </div>
            </div>
        </section>

        <!-- Post Feed Area -->
        <section id="postFeedArea">
            <h2 class="text-xl font-semibold mb-4 text-blue-700">Feed</h2>
            <div class="space-y-6">
                <!-- Example Post Item 1 (Static example, will be cleared by JS) -->
                <article class="bg-white p-6 rounded-lg shadow-md">
                    <div class="flex items-center mb-4">
                        <img class="h-10 w-10 rounded-full mr-3" src="https://via.placeholder.com/40" alt="User avatar">
                        <div>
                            <p class="font-semibold text-gray-800">User One</p>
                            <p class="text-xs text-gray-500">Posted on May 24, 2024</p>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-3">
                        This is an example post content. Learning about Firebase and Tailwind CSS is fun!
                    </p>
                    <img class="rounded-md w-full max-h-96 object-cover" src="https://via.placeholder.com/600x400" alt="Post image">
                    <div class="mt-4 flex justify-between items-center">
                        <button class="text-blue-500 hover:text-blue-700 font-semibold">Like</button>
                        <button class="text-gray-500 hover:text-gray-700 font-semibold">Comment</button>
                        <button class="text-gray-500 hover:text-gray-700 font-semibold">Share</button>
                    </div>
                </article>

                <!-- Example Post Item 2 -->
                <article class="bg-white p-6 rounded-lg shadow-md">
                    <div class="flex items-center mb-4">
                        <img class="h-10 w-10 rounded-full mr-3" src="https://via.placeholder.com/40" alt="User avatar">
                        <div>
                            <p class="font-semibold text-gray-800">User Two</p>
                            <p class="text-xs text-gray-500">Posted on May 23, 2024</p>
                        </div>
                    </div>
                    <p class="text-gray-700">
                        Just finished a great coding session. Excited to build more with these tools.
                    </p>
                     <div class="mt-4 flex justify-between items-center">
                        <button class="text-blue-500 hover:text-blue-700 font-semibold">Like</button>
                        <button class="text-gray-500 hover:text-gray-700 font-semibold">Comment</button>
                        <button class="text-gray-500 hover:text-gray-700 font-semibold">Share</button>
                    </div>
                </article>
            </div>
        </section>
    </div>

    <!-- Firebase SDKs and app-specific JS for Firebase interaction -->
    <!-- <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-app-compat.js"></script> -->
    <!-- <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-auth-compat.js"></script> -->
    <!-- <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-firestore-compat.js"></script> -->
    <!-- <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-storage-compat.js"></script> -->
    <!-- <script src="js/firebase-config.js"></script> -->
    <!-- <script src="js/app.js"></script> -->
    <script>
        // Placeholder for main app logic, e.g., checking auth state, loading posts
        console.log('app_main.html loaded.');

        // Example: Logout button functionality (to be implemented with Firebase)
        const logoutButton = document.getElementById('logoutButton');
        if (logoutButton) {
            logoutButton.addEventListener('click', () => {
                console.log('Logout attempt...');
                // Actual Firebase logout logic here
                // Example: firebase.auth().signOut().then(() => { window.location.href = 'login_firebase.html'; });
                alert('Logout functionality not yet implemented. Redirecting to login page placeholder.');
                window.location.href = 'login_firebase.html';
            });
        }

        // Placeholder for post creation
        const createPostForm = document.getElementById('createPostForm');
        if(createPostForm) {
            createPostForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const content = createPostForm.postContent.value;
                const imageFile = createPostForm.postImage.files[0];
                console.log('New post submission:', { content, imageFile: imageFile ? imageFile.name : 'No image' });
                // Actual Firebase post creation logic here
                document.getElementById('postErrorMessage').textContent = 'Post creation not yet implemented.';
                document.getElementById('postErrorMessage').classList.remove('hidden');
            });
        }
    </script>
    
    <!-- Firebase SDK -->
    <script defer src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <!-- Firestore and Storage SDKs are commented out as they are not used in this subtask
    <script defer src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
    -->
    <script defer src="./js/firebase-init.js"></script>
    <!-- Specific auth logic for main app page -->
    <script defer src="./js/auth_main_page.js"></script>
</body>
</html>
